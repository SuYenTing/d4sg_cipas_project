# D4SG資料英雄計畫X黨產會專案文本分析程式

## 一、專案說明

待補充...

## 二、專案程式安裝執行說明

此專案主要運行在Windows作業系統。

Step1. 請先在電腦上安裝Python程式，建議安裝Python3.7以上版本。[[Python Windows版本下載位置](https://www.python.org/downloads/windows/)]

Step2. 在Gihub下載本專案後，請直接執行`run.bat`批次檔。該批次檔案會自動建立Python虛擬環境及安裝相關套件。

Step3. 虛擬環境建置好後，畫面會提示是否要進行CKIP斷詞與實體辨識。若第一次執行請先按「Y」，程式會自動下載CKIP模型，由於檔案很大(約1.74GB)，請耐心等候。下載完後會依據黨產會提供的史料故事文章，開始進行斷詞與實體辨識。此處斷詞與實體辨識一樣需要等候一段時間。

Step4. 在CKIP模型執行完後，程式會自行建立WEB，使用者可依據畫面提示，在網址列上輸入`127.0.0.1:8050`，即可看到CKIP模型與實體辨識成果。

Step5. 若之後想看上次CKIP模型執行完後的WEB內容時，一樣執行`run.bat`批次檔，在畫面提示是否要進行CKIP斷詞與實體辨識時選擇「N」，即可跳過CKIP斷詞與實體辨識，直接開啟網頁觀看。

## 三、WEB功能說明
* 史料斷詞成果
* 建議加入詞彙
* 網絡關係圖
* 數位專題

## 四、增加新文本說明

若想要新增文本，請將新的文本資料檔案放入`./data/docs/`資料夾中，目前檔案可支援格式包含`xls`、`xlsx`及`csv`。檔案的內容請務必要提供兩個欄位，分別為`標題`與`內文`，程式主要會讀取這兩個欄位內容，其餘欄位可自行調整。

放入新文本後，執行`run.bat`批次檔，重新進行CKIP斷詞與實體辨識模型，即可從WEB上看到最新結果。

## 五、修改自定義字典

自定義字典檔案位置在`./data/自定義字典.xlsx`，透過修改自定義字典，可讓CKIP模型在斷詞與實體辨識上更加精準。

檔案開啟後會有3個欄位：

|欄位名稱|說明|
|:--|:--|
|自定義詞|使用者自定義專有名詞(例如人名、組織、事件等)|
|同義詞|同義詞設定，在網絡分析部分會將相同同義詞的詞視為一個節點|
|實體類別|使用者自行定義詞所屬的實體類別，在網絡分析部分會依標註實體類別的詞做為節點繪製|

### 六、使用情境說明

本程式主要以使用者可能使用情境進行設想與開發。

若使用者有新的文本想要進行分析，可將整理好的檔案放入到`./data/docs/`資料中，並執行`run.bat`批次檔，進行CKIP模型斷詞與實體辨識後，開啟WEB即可觀看模型初步執行成果。

由於是新的文本資料，CKIP模型可能在斷詞與實體辨識效果不佳，故此時需要開啟`./data/自定義字典.xlsx`去新增自定義字典內容。

在新增好自定義字典內容後，需要重新執行`run.bat`批次檔，讓CKIP模型再次斷詞與實體辨識，取得更好的結果。上述操作可能會持續反覆進行，讓模型輸出的成果品質愈來愈好。





